<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard - ShopNest</title>

  <!-- Bootstrap 4 CSS (local) -->
  <link href="../css/bootstrap-4.3.1.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
  
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      --sidebar-bg: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
      --card-shadow: 0 10px 30px rgba(0,0,0,0.1);
      --hover-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }

    * {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    body { 
      min-height: 100vh; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }

    /* Animated Background Particles */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><circle cx="200" cy="200" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="800" cy="300" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="400" cy="600" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="100" cy="800" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="700" cy="100" r="2" fill="rgba(255,255,255,0.1)"/></svg>');
      animation: float 20s infinite linear;
      pointer-events: none;
      z-index: -1;
    }

    @keyframes float {
      0% { transform: translateY(0px) rotate(0deg); }
      100% { transform: translateY(-20px) rotate(360deg); }
    }

    .sidebar { 
      min-height: 100vh; 
      background: var(--sidebar-bg);
      color: #fff; 
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(255,255,255,0.1);
      transform: translateX(0);
      animation: slideInLeft 0.3s ease-out;
    }

    @keyframes slideInLeft {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .sidebar a { 
      color: #cfd8dc; 
      border-radius: 8px;
      margin: 5px 0;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .sidebar a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }

    .sidebar a:hover::before {
      left: 100%;
    }

    .sidebar a:hover {
      color: #fff;
      background: rgba(255,255,255,0.1);
      transform: translateX(5px);
      text-decoration: none;
    }

    .sidebar .nav-link.active { 
      background: rgba(255,255,255,0.15);
      color: #fff;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .brand { 
      font-weight: 700; 
      color: #fff;
      text-align: center;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    .main-content {
      animation: fadeInUp 0.4s ease-out;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px 0 0 20px;
      min-height: 100vh;
    }

    @keyframes fadeInUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .card-stats { 
      border-radius: 16px;
      border: none;
      background: white;
      box-shadow: var(--card-shadow);
      transform: translateY(0);
      position: relative;
      overflow: hidden;
    }

    .card-stats::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--primary-gradient);
    }

    .card-stats:nth-child(2)::before { background: var(--success-gradient); }
    .card-stats:nth-child(3)::before { background: var(--warning-gradient); }
    .card-stats:nth-child(4)::before { background: var(--secondary-gradient); }

    .card-stats:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: var(--hover-shadow);
    }

    .stat-icon {
      font-size: 28px;
      padding: 15px;
      border-radius: 50%;
      background: rgba(0,0,0,0.05);
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .btn {
      border-radius: 25px;
      padding: 10px 25px;
      font-weight: 500;
      border: none;
      position: relative;
      overflow: hidden;
    }

    .btn-success {
      background: linear-gradient(45deg, #28a745, #20c997);
      box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
    }

    .btn-success:hover {
      background: linear-gradient(45deg, #20c997, #28a745);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
    }

    .btn-outline-secondary {
      border: 2px solid #6c757d;
      color: #6c757d;
    }

    .btn-outline-secondary:hover {
      background: #6c757d;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
    }

    .btn-danger {
      background: var(--secondary-gradient);
      border: none;
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
    }

    .modal-content {
      border-radius: 20px;
      border: none;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .modal-header {
      background: var(--primary-gradient);
      color: white;
      border-radius: 20px 20px 0 0;
      border: none;
    }

    .form-control {
      border-radius: 10px;
      border: 2px solid #e9ecef;
      padding: 12px 16px;
    }

    .form-control:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      transform: scale(1.02);
    }

    .table-responsive {
      max-height: 420px;
      overflow: auto;
      border-radius: 15px;
      box-shadow: var(--card-shadow);
    }

    .header-section {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: var(--card-shadow);
      animation: slideInDown 0.3s ease-out;
    }

    @keyframes slideInDown {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .stats-container {
      animation: staggerIn 0.4s ease-out;
    }

    @keyframes staggerIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .stats-container .col-sm-6:nth-child(1) { animation-delay: 0.05s; }
    .stats-container .col-sm-6:nth-child(2) { animation-delay: 0.1s; }
    .stats-container .col-sm-6:nth-child(3) { animation-delay: 0.15s; }
    .stats-container .col-sm-6:nth-child(4) { animation-delay: 0.2s; }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive animations */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.show {
        transform: translateX(0);
      }
    }

    /* Hover effects for navigation */
    .nav-item {
      position: relative;
    }

    .nav-item::after {
      content: '';
      position: absolute;
      width: 3px;
      height: 0;
      background: #fff;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      transition: height 0.3s ease;
    }

    .nav-item:hover::after,
    .nav-item.active::after {
      height: 60%;
    }

    /* Glassmorphism effect for cards */
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(102, 126, 234, 0.6);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(102, 126, 234, 0.8);
    }

    footer {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row no-gutters">
      <!-- Sidebar -->
      <nav class="col-md-2 sidebar p-3">
        <div class="mb-4 text-center">
          <img src="../images/logo.png" alt="logo" width="60" class="img-fluid mb-2">
          <div class="brand">ShopNest Admin</div>
        </div>

        <ul class="nav flex-column">
          <li class="nav-item active">
            <a class="nav-link active d-flex align-items-center" href="admin.html">
              <i class="bi-speedometer2 mr-2"></i> Dashboard
            </a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link d-flex align-items-center" href="product.php"> 
              <em class="bi-box-seam mr-2"></em> Products 
            </a> 
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="orders.php">
              <i class="bi-card-list mr-2"></i> Orders
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="users.php">
              <i class="bi-people mr-2"></i> Users
            </a>
          </li>
          <li class="nav-item mt-3">
            <a class="btn btn-danger btn-block" href="../index.php">
              <i class="bi-shop mr-2"></i>Go to Store
            </a>
          </li>
        </ul>
      </nav>

      <!-- Main content -->
      <main class="col-md-10 main-content p-4">
        <!-- Header -->
        <div class="header-section">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h3 class="m-0" style="background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Dashboard</h3>
              <p class="text-muted mb-0">Welcome back! Here's what's happening with your store.</p>
            </div>
            <div>
              <a href="signout.html" class="btn btn-outline-secondary">
                <i class="bi-box-arrow-right mr-1"></i>Sign out
              </a>
            </div>
          </div>
        </div>

        <!-- Stats -->
        <div class="row mb-4 stats-container">
          <div class="col-sm-6 col-lg-3 mb-3">
            <div class="card card-stats p-3">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <small class="text-muted font-weight-bold">Total Sales</small>
                  <h4 class="mb-0 font-weight-bold" style="color: #28a745;">LKR 245,600</h4>
                  <small class="text-success">
                    <i class="bi-arrow-up"></i> +12% from last month
                  </small>
                </div>
                <div class="stat-icon" style="color: #28a745;">
                  <i class="bi-currency-dollar"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3 mb-3">
            <div class="card card-stats p-3">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <small class="text-muted font-weight-bold">Orders</small>
                  <h4 class="mb-0 font-weight-bold" style="color: #007bff;">128</h4>
                  <small class="text-info">
                    <i class="bi-arrow-up"></i> +8% this week
                  </small>
                </div>
                <div class="stat-icon" style="color: #007bff;">
                  <i class="bi-basket"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3 mb-3">
            <div class="card card-stats p-3">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <small class="text-muted font-weight-bold">Products</small>
                  <h4 class="mb-0 font-weight-bold" style="color: #6f42c1;">342</h4>
                  <small class="text-primary">
                    <i class="bi-plus"></i> 15 new items
                  </small>
                </div>
                <div class="stat-icon" style="color: #6f42c1;">
                  <i class="bi-boxes"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-3 mb-3">
            <div class="card card-stats p-3">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <small class="text-muted font-weight-bold">Low Stock</small>
                  <h4 class="mb-0 font-weight-bold" style="color: #dc3545;">7 Items</h4>
                  <small class="text-danger">
                    <i class="bi-exclamation-triangle"></i> Needs attention
                  </small>
                </div>
                <div class="stat-icon" style="color: #dc3545;">
                  <i class="bi-exclamation-triangle"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="text-muted small text-center">
          © 2025 ShopNest. Admin Panel.
        </footer>
      </main>
    </div>
  </div>

  <!-- Add Product Modal -->
  <div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProductLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <form id="addProductForm" method="POST" action="add_product.php" enctype="multipart/form-data" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addProductLabel">
            <i class="bi-plus-circle mr-2"></i>Add New Product
          </h5>
          <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body p-4">
          <!-- form fields with names for PHP -->
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="prodName" class="font-weight-bold">Product Name</label>
              <input name="name" type="text" class="form-control" id="prodName" required>
            </div>
            <div class="form-group col-md-6">
              <label for="prodCategory" class="font-weight-bold">Category</label>
              <select name="category_id" id="prodCategory" class="form-control" required>
                <option value="">-- Select Category --</option>
                <option value="1">Watches</option>
                <option value="2">Audio</option>
                <option value="3">Accessories</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="prodPrice" class="font-weight-bold">Price (LKR)</label>
              <input name="price" type="number" step="0.01" class="form-control" id="prodPrice" required>
            </div>
            <div class="form-group col-md-4">
              <label for="prodStock" class="font-weight-bold">Stock Quantity</label>
              <input name="stock_quantity" type="number" class="form-control" id="prodStock" required>
            </div>
            <div class="form-group col-md-4">
              <label for="prodImage" class="font-weight-bold">Image</label>
              <input name="image" type="file" class="form-control-file" id="prodImage" style="padding: 12px; border: 2px solid #e9ecef; border-radius: 10px;">
            </div>
          </div>

          <div class="form-group">
            <label for="prodDesc" class="font-weight-bold">Description</label>
            <textarea name="description" id="prodDesc" rows="3" class="form-control" placeholder="Enter product description..."></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            <i class="bi-x-circle mr-1"></i>Close
          </button>
          <button type="submit" class="btn btn-primary">
            <i class="bi-check-circle mr-1"></i>Save Product
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="../js/jquery-3.3.1.min.js"></script>
  <script src="../js/popper.min.js"></script>
  <script src="../js/bootstrap-4.3.1.js"></script>

  <script>
    // Minimal JavaScript for essential functionality only
    $(document).ready(function() {
      // Simple button click feedback
      $('.btn').on('click', function() {
        $(this).blur();
      });
    });

    // Simple search on products table (preserved functionality)
    if (document.getElementById('searchProduct')) {
      document.getElementById('searchProduct').addEventListener('input', function() {
        const q = this.value.toLowerCase();
        const rows = document.querySelectorAll('#productsTable tr');
        rows.forEach(r => {
          if (r.children[2]) {
            const name = r.children[2].innerText.toLowerCase();
            r.style.display = name.indexOf(q) !== -1 ? '' : 'none';
          }
        });
      });
    }

    // Handle add product form submit with basic validation
    if (document.getElementById('addProductForm')) {
      document.getElementById('addProductForm').addEventListener('submit', function(e){
        const form = this;
        const inputs = form.querySelectorAll('input[required], select[required]');
        let isValid = true;

        inputs.forEach(input => {
          if (!input.value.trim()) {
            input.style.borderColor = '#dc3545';
            isValid = false;
          } else {
            input.style.borderColor = '#28a745';
          }
        });

        if (!isValid) {
          e.preventDefault();
          alert('Please fill in all required fields.');
        }
      });
    }

    // Mobile sidebar toggle
    function toggleSidebar() {
      $('.sidebar').toggleClass('show');
    }
  </script>
</body>
</html>